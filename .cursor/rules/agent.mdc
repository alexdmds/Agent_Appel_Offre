---
description: 
globs: 
alwaysApply: true
---
Prompt Â« spec Â» pour gÃ©nÃ©rer lâ€™agent LangChain

ğŸ¯ Objectif

Construis un agent autonome (approche ReAct) capable de lire un dossier dâ€™appel dâ€™offres (AO) brut, dâ€™en extraire lâ€™essentiel puis de dÃ©cider Go / NoGo.
Livrables attendus :
	1.	RÃ©sumÃ© dÃ©taillÃ© : besoins, contraintes, dÃ©lais, critÃ¨res de notation.
	2.	Recommandation Go / NoGo (argumentÃ©e).
	3.	Ã‰bauche de plan de rÃ©ponse (plan structurÃ© : comprÃ©hension / proposition / planning / budget).
	4.	SynthÃ¨se â€œmanagerâ€ (1 page, claire, prÃªte Ã  copier-coller).

ğŸ§° Outils disponibles

Nom du wrapper	Signature	RÃ´le
read_documents_from_folder(folder_path: str) -> dict	Retourne :â€¢ text : concat brut (âœ‚ï¸ 4 000 car. max/fichier)â€¢ long_files : liste {filepath, length} pour les fichiers tronquÃ©s	Import initial du dossier AO
read_more_from_file(filepath: str, offset: int = 4000, max_chars: int = 4000) -> str	Lit la suite dâ€™un fichier long, par tranches	Exploration incrÃ©mentale
query_rag(question: str) -> Any	Recherche RAG dans lâ€™historique dâ€™AO (anciens Go/NoGo)	Enrichir lâ€™analyse

âš™ï¸ Contraintes & bonnes pratiques
	â€¢	ModÃ¨le : ChatMistralAI
	â€¢	Utiliser la clÃ© API en var d'env : MISTRAL_API_KEY
	â€¢	MÃ©moire courte : ne garde que les 4 derniers messages pour ne pas dÃ©passer ~16 k tokens.
	â€¢	Limiter le contexte :
	â€¢	Max 2 000 car. envoyÃ©s au modÃ¨le au total lors du â€œrÃ©sumÃ© initialâ€.
	â€¢	Si long_files non vide, utiliser read_more_from_file en boucle (ReAct) plutÃ´t que tout charger dâ€™un coup.
	â€¢	Streaming / ReAct : rÃ©flÃ©chir pas-Ã -pas â†’ dÃ©cider â†’ appeler outil â†’ stocker rÃ©sultat â†’ continuer.
	â€¢	< 500 lignes : architecture modulaire (1 fichier) ; classes/fonctions courtes, pas de sur-ingÃ©nierie.
	â€¢	DÃ©pendances : langchain, mistralai, PyPDF2, python-docx, pandas, openpyxl, python-pptx. Rien de plus.
	â€¢	ExÃ©cution locale : pas de cloud externe, pas de base vectorielle â€” juste les outils fournis.

ğŸ“ Format de sortie exigÃ© (Markdown)

### RÃ©sumÃ© des documents
...

### Points Ã  explorer via RAG
- ...
- ...

### RÃ©sultats RAG
- **Point 1** : â€¦
- **Point 2** : â€¦

### Recommandation Go ou NO Go
> **GO** / **NO GO** because â€¦  

### Plan de rÃ©ponse
1. ComprÃ©hension du besoin  
2. Proposition technique / fonctionnelle  
3. Ã‰quipe & planning  
4. Proposition financiÃ¨re (si info dispo)

### SynthÃ¨se manager
**Besoin** : â€¦  
**DÃ©cision** : GO / NO GO  
**Pourquoi** : 1) â€¦  2) â€¦  3) â€¦  
**Next steps** : â€¦

ğŸ’¡ Ã‰tapes internes recommandÃ©es (ordre indicatif)
	1.	Import initial : read_documents_from_folder â†’ tronquer Ã  2 000 car. max.
	2.	Premier rÃ©sumÃ© pour lister les â€œPoints Ã  explorer via RAGâ€.
	3.	Boucle RAG : pour chaque point, query_rag, rÃ©sumer, agrÃ©ger.
	4.	Lecture incrÃ©mentale si des long_files semblent critiques (ReAct : dÃ©cider, appeler read_more_from_file, rÃ©sumer, boucler).
	5.	SynthÃ¨se finale : remplir les 5 blocs Markdown ci-dessus.

ğŸ”§ Conseils dâ€™implÃ©mentation
	â€¢	Fonction â€œprint_agent_actionâ€ (optionnelle) : log console clair â€” utile pour le dÃ©bogage.
	â€¢	Tests : prÃ©voir un dossier â€œsample_AOâ€ avec 2-3 docs variÃ©s pour valider.